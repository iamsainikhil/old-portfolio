jQuery(document).ready(function(t){function e(){var e=Math.ceil(2*s/a),r=n>d?1.1/Math.sin(Math.PI/2-n*Math.PI/180):1.1/Math.sin(Math.PI/2-d*Math.PI/180),o=Math.ceil(2*s*r),i=Math.ceil(o/a),l=s-o/2,m=(e-i)/2;t(".cd-background-wrapper").css({height:e}),t(".cd-floating-background").addClass("is-absolute").css({left:l,top:m,width:o})}function r(e,r){var a=(-e.pageX+s)/s*n,i=e.pageY-r,l=(i-o)/o*d;a>n&&(a=n),-n>a&&(a=-n),l>d&&(l=d),-d>l&&(l=-d),t(".cd-floating-background").css({"-moz-transform":"rotateX("+l+"deg) rotateY("+a+"deg) translateZ(0)","-webkit-transform":"rotateX("+l+"deg) rotateY("+a+"deg) translateZ(0)","-ms-transform":"rotateX("+l+"deg) rotateY("+a+"deg) translateZ(0)","-o-transform":"rotateX("+l+"deg) rotateY("+a+"deg) translateZ(0)",transform:"rotateX("+l+"deg) rotateY("+a+"deg) translateZ(0)"})}var a,o=.5*t(window).height(),s=.5*t(window).width(),n=5,d=3;t(".cd-floating-background").find("img").eq(0).load(function(){a=t(this).width()/t(this).height(),t("html").hasClass("preserve-3d")&&e()}).each(function(){this.complete&&t(this).load()}),t(".cd-background-wrapper").each(function(){t(this).on("mousemove",function(e){var a=t(this).offset().top;t("html").hasClass("preserve-3d")&&window.requestAnimationFrame(function(){r(e,a)})})}),t(window).on("resize",function(){t("html").hasClass("preserve-3d")?window.requestAnimationFrame(function(){o=.5*t(window).height(),s=.5*t(window).width(),e()}):(t(".cd-background-wrapper").attr("style",""),t(".cd-floating-background").attr("style","").removeClass("is-absolute"))})}),function(){var t=document.createElement("p"),e=document.getElementsByTagName("html")[0],r=document.getElementsByTagName("body")[0],a={webkitTransformStyle:"-webkit-transform-style",MozTransformStyle:"-moz-transform-style",msTransformStyle:"-ms-transform-style",transformStyle:"transform-style"};r.insertBefore(t,null);for(var o in a)void 0!==t.style[o]&&(t.style[o]="preserve-3d");var s=window.getComputedStyle(t,null),n=s.getPropertyValue("-webkit-transform-style")||s.getPropertyValue("-moz-transform-style")||s.getPropertyValue("-ms-transform-style")||s.getPropertyValue("transform-style");"preserve-3d"!==n?e.className+=" no-preserve-3d":e.className+=" preserve-3d",document.body.removeChild(t)}();
